<!DOCTYPE html>
<html>
<head>
    <title>MindFrame - AI Focus Monitoring</title>
    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>

    <style>
        #scoreContainer {
            width: 80%;
            height: 22px;
            border-radius: 12px;
            background: rgba(255,255,255,0.2);
            margin: 15px auto;
            overflow: hidden;
        }

        #scoreBar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff4ccf, #4CC9FF);
            transition: width 0.5s ease-out;
            border-radius: 12px;
        }
        #scoreValue {
            font-size: 22px;
            margin-top: 6px;

        }

        h1 {
            margin-top: 30px;
            font-size: 38px;
            font-weight: 600;
            color: #4CC9FF;
            text-shadow: 0px 0px 12px #4CC9FF;
        }

        #videoBox {
            position: absolute;
            top: 20px;
            left: 20px;
            border-radius: 14px;
            border: 2px solid #4CC9FF;
            box-shadow: 0px 0px 15px #4CC9FF;
        }

        #panel {
            margin-top: 220px;
            padding: 30px;
            width: 60%;
            margin-left: auto;
            margin-right: auto;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            backdrop-filter: blur(8px);
            box-shadow: 0 0 25px rgba(76, 201, 255, 0.4);
            animation: fadeIn 1s ease-in-out;
        }

        #statusBox {
            font-size: 42px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        #recommendation {
            font-size: 24px;
            opacity: 0.9;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>

<h1>MIND FRAME â€” AI FOCUS MONITORING SYSTEM</h1>

<video id="videoBox" width="200" height="150" autoplay muted></video>

<div id="panel">
    <div id="statusBox">Detecting...</div>
    <div id="recommendation">Please stay still...</div>

    <h3 style="margin-top: 25px;">Productivity Score</h3>
    <div id="scoreContainer">
        <div id="scoreBar"></div>
    </div>
    <div id="scoreValue">0%</div>
</div>

<script>
    Promise.all([
        faceapi.nets.tinyFaceDetector.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js/weights'),
        faceapi.nets.faceExpressionNet.loadFromUri('https://cdn.jsdelivr.net/npm/face-api.js/weights')
    ]).then(startVideo);

    function startVideo() {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => document.getElementById('videoBox').srcObject = stream);
        analyze();
    }

    async function analyze() {
        const video = document.getElementById('videoBox');
        const detection = await faceapi.detectSingleFace(video, new faceapi.TinyFaceDetectorOptions()).withFaceExpressions();

        let status = "Analyzing...";
        let advice = "";

        if (detection) {
            const mood = detection.expressions;
            const tired = mood.sad + mood.angry;
            const neutral = mood.neutral;
            const focused = mood.happy + mood.surprised;

            if (focused > 0.5) { status = "FOCUSED âœ…"; advice = "Great work â€” continue studying."; }
            else if (neutral > 0.5) { status = "NEUTRAL ðŸ˜"; advice = "Maintain attention."; }
            else if (tired > 0.4) { status = "TIRED ðŸ˜´"; advice = "Take a short 2â€“3 min break."; }
            else { status = "DISTRACTED ðŸ˜•"; advice = "Please remove distractions & re-focus."; }
        }

        document.getElementById("statusBox").innerHTML = status;
        document.getElementById("recommendation").innerHTML = advice;

        requestAnimationFrame(analyze);
    }
</script>

</body>
</html>
